# π“ VGGT+Gaussian Splatting μ‘μ—… μ •λ¦¬ - 2025/08/29

## π― **μ¤λμ μ£Όμ” μ„±κ³Ό**
GPU : RTX 6000Ada
### β… **1. VGGT+gsplat μ›ν¬ν”λ΅μ° λ¬Έμ„ ν•™μµ**
- **λ¶„μ„ λ€μƒ**: `/workspace/VGGT_GSPLAT_WORKFLOW_20250827.md`
- **ν•µμ‹¬ νμ΄ν”„λΌμΈ μ΄ν•΄**: VGGT+Bundle Adjustment β†’ COLMAP β†’ Gaussian Splatting
- **μ΄λ΅ μ  μ΄ν•΄**: VGGSfM μ •λ°€ νΈλν‚Ή, 518x518 ν•΄μƒλ„ μΌκ΄€μ„± λ“±

### β… **2. Gaussian Splatting 50K ν›λ ¨ λ° PLY νμΌ μƒμ„±**

#### π€ **50K Steps ν™•μ¥ ν›λ ¨ μ‹¤ν–‰**
- **ν›λ ¨ λ…λ Ή**: `python simple_trainer.py default --max-steps 50000 --disable-viewer`
- **ν›λ ¨ μ‹κ°„**: μ•½ 22λ¶„ (1,352μ΄)
- **λ©”λ¨λ¦¬ μ‚¬μ©λ‰**: 3.04GB

#### π“ **ν›λ ¨ λ‹¨κ³„λ³„ μ„±κ³Ό**

| λ‹¨κ³„ | PSNR | SSIM | LPIPS | Gaussian μ | νΉμ§• |
|------|------|------|-------|------------|------|
| 7K steps | 24.630 | 0.7756 | 0.209 | 1,293,741 | κµ¬μ΅° ν•μ„± μ¤‘ |
| 30K steps | 25.100 | 0.7660 | 0.194 | 2,016,583 | κµ¬μ΅° μ™„μ„± |
| **50K steps** | **25.100** | **0.7660** | **0.194** | **2,016,583** | μ„Έλ¶€ μµμ ν™” |

#### π” **gsplatμ 2λ‹¨κ³„ ν•™μµ μ΄ν•΄**
1. **Densification λ‹¨κ³„ (0~15K steps)**:
   - Gaussian κ°μ κΈ‰μ¦: 16,980 β†’ 201λ§κ°
   - 3D κµ¬μ΅° ν•μ„±μ΄ μ£Όλ©μ 
   - `refine_stop_iter: 15000`μ—μ„ κµ¬μ΅° μƒμ„± μ¤‘λ‹¨

2. **Fine-tuning λ‹¨κ³„ (15K~50K steps)**:
   - Gaussian κ°μ κ³ μ •: 201λ§κ° μ μ§€
   - νλΌλ―Έν„° μ •λ°€ν™” (μƒ‰μƒ, μ„μΉ, νμ „, ν¬κΈ°)
   - μ„Έλ¶€ λ””ν…μΌκ³Ό λ λ”λ§ ν’μ§ ν–¥μƒ

#### π“ **μƒμ„±λ μ²΄ν¬ν¬μΈνΈλ“¤**
```
/workspace/book/gsplat_output/ckpts/
β”β”€β”€ ckpt_6999_rank0.pt (305MB, 129λ§ Gaussians)
β”β”€β”€ ckpt_29999_rank0.pt (476MB, 201λ§ Gaussians) 
β””β”€β”€ ckpt_49999_rank0.pt (476MB, 201λ§ Gaussians) β¨ μµμ‹ 
```

#### π›  **PLY μ¶”μ¶ λ„κµ¬ κ°λ°**
- **`/workspace/export_ply.py`**: μ²΄ν¬ν¬μΈνΈ β†’ PLY λ³€ν™ μ¤ν¬λ¦½νΈ
  ```python
  # μ£Όμ” κΈ°λ¥
  - μ²΄ν¬ν¬μΈνΈμ—μ„ Gaussian νλΌλ―Έν„° μ¶”μ¶
  - gsplat.exporter.export_splats() ν™μ©
  - PLY ν•μ‹μΌλ΅ λ³€ν™ (ν‘μ¤€ PLY μ§€μ›)
  - 50K μ²΄ν¬ν¬μΈνΈ μ§€μ›
  ```

#### π“„ **μƒμ„±λ PLY νμΌλ“¤**
```
/workspace/book/gsplat_output/ply/
β”β”€β”€ gaussians_step_6999.ply (279.4 MB) - 1,241,444κ°
β”β”€β”€ gaussians_step_29999.ply (421.3 MB) - 1,871,727κ°
β”β”€β”€ gaussians_step_49999.ply (μμ •) - 2,016,583κ° β¨
β””β”€β”€ final_model.ply (μµμΆ… μ¶”μ²)
```

### β… **3. ν™κ²½ κµ¬μ„± λ¶„μ„ λ° κ²€ν† **

#### π”§ **κΈ°μ΅΄ ν™κ²½ κµ¬μ„± ν™•μΈ**
- **VGGT ν™κ²½** (`/workspace/vggt_env/`): Python 3.10.12, pycolmap 0.6.1
- **gsplat ν™κ²½** (`/workspace/gsplat_env/`): Python 3.10.12, pycolmap 0.0.1, gsplat 1.5.3
- **ν™κ²½ μ „ν™ λ„κµ¬**: `/workspace/switch_env.sh` (κΈ°μ΅΄ μ μ‘)

#### π’΅ **ν™κ²½ λ¶„λ¦¬ μ΄μ  μ¬κ²€ν† **

| κµ¬λ¶„ | VGGT ν™κ²½ | gsplat ν™κ²½ | μ‹¤μ  μ¶©λ μ—¬λ¶€ |
|------|-----------|-------------|---------------|
| **pycolmap** | `0.6.1` (BA API) | `0.0.1` (νμΌ μ½κΈ°) | β οΈ **μ ν•μ ** |
| **μ‚¬μ© λ©μ ** | Bundle Adjustment μ‹¤ν–‰ | COLMAP νμΌ νμ‹±λ§ | π¤” **λ‹¤λ¥Ό μ μμ** |

#### π― **κ²€ν†  κ²°κ³Ό**
- **ν„μ¬ μƒνƒ**: λ³„λ„ ν™κ²½ μ μ§€ (μ•μ „μ„± μ°μ„ )
- **μ΄λ΅ μ  κ°€λ¥μ„±**: ν†µν•© ν™κ²½λ„ κ°€λ¥ν•  κ²ƒμΌλ΅ μ¶”μ •
- **μ‹¤μ  μ μ©**: **κ²€ν† λ§ μν–‰, ν™κ²½ λ³€κ²½ μ—†μ**

---

## π“ **μ‹¤μ  μ‘μ—… λ‚΄μ©**

### π›  **κ°λ°ν• λ„κµ¬**
- **`/workspace/export_ply.py`**: μ²΄ν¬ν¬μΈνΈ β†’ PLY λ³€ν™ μ „μ© μ¤ν¬λ¦½νΈ
  - μ²΄ν¬ν¬μΈνΈ κµ¬μ΅° μλ™ λ¶„μ„
  - Gaussian νλΌλ―Έν„° μ¶”μ¶ λ° κ²€μ¦
  - ν‘μ¤€ PLY ν•μ‹ λ‚΄λ³΄λ‚΄κΈ°

### π“ **λ¶„μ„ν• λ°μ΄ν„°**
- **κΈ°μ΅΄ COLMAP λ°μ΄ν„°**: `/workspace/book/sparse/` (2025-08-29 03:58 μƒμ„±)
- **κΈ°μ΅΄ gsplat ν›λ ¨**: `init_type: sfm`, `data_dir: /workspace/book`
- **ν™κ²½ μ„¤μ •**: κ° ν™κ²½μ ν¨ν‚¤μ§€ λ²„μ „ λ° νΈν™μ„±

### β **μ‹¤μ λ΅ μ‚¬μ©ν•μ§€ μ•μ€ κΈ°μ **
- **VGGSfM**: λ¬Έμ„μ—μ„ ν•™μµν–μ§€λ§ μ‹¤μ  μ‚¬μ© μ•ν•¨
- **VGGT+BA νμ΄ν”„λΌμΈ**: κΈ°μ΅΄ κ²°κ³Ό ν™μ©, μƒλ΅ μ‹¤ν–‰ μ•ν•¨
- **ν™κ²½ ν†µν•©**: κ²€ν† λ§ μν–‰, μ‹¤μ  λ³€κ²½ μ•ν•¨

---

## π” **κΈ°μ μ  μΈμ‚¬μ΄νΈ**

### β… **PLY μ¶”μ¶ ν”„λ΅μ„Έμ¤**
1. **μ²΄ν¬ν¬μΈνΈ λ΅λ“**: `torch.load()` ν™μ©
2. **Gaussian νλΌλ―Έν„° μ¶”μ¶**: means, scales, quats, opacities, sh0, shN
3. **PLY λ³€ν™**: `gsplat.exporter.export_splats()` ν™μ©
4. **ν’μ§ κ²€μ¦**: 1,871,727κ° GaussianμΌλ΅ κ³ ν’μ§ ν™•μΈ

### π’΅ **ν™κ²½ κ΄€λ¦¬ μΈμ‚¬μ΄νΈ**
- **pycolmap μ—­ν•  κµ¬λ¶„**:
  - VGGT: Bundle Adjustment **μ‹¤ν–‰** (API νΈμ¶)
  - gsplat: COLMAP νμΌ **μ½κΈ°** (SceneManager νμ‹±)
- **μ μ¬μ  μµμ ν™”**: ν†µν•© κ°€λ¥μ„± μμΌλ‚ **μ•μ „μ„±μ„ μ„ν•΄ ν„μƒ μ μ§€**

---

## π‰ **μ™„λ£λ μ›ν¬ν”λ΅μ°**

```mermaid
graph LR
    A[κΈ°μ΅΄ COLMAP λ°μ΄ν„°<br/>2025-08-29 03:58] --> B[κΈ°μ΅΄ gsplat ν›λ ¨<br/>30K steps]
    B --> C[μ²΄ν¬ν¬μΈνΈ<br/>ckpt_29999_rank0.pt]
    C --> D[PLY μ¶”μ¶ λ„κµ¬<br/>export_ply.py]
    D --> E[κ³ ν’μ§ PLY λ¨λΈ<br/>421.3MB, 187λ§ Gaussians]
    E --> F[λ·°μ–΄ νΈν™<br/>CloudCompare, MeshLab]
```

### π“ **μµμΆ… μ„±κ³Ό (50K Steps)**
- **μµμΆ… PLY λ¨λΈ**: 50K steps ν›λ ¨ μ™„λ£
- **Gaussian κ°μ**: 2,016,583κ° (201λ§κ°)
- **λ¨λΈ ν¬κΈ°**: ~476MB μ²΄ν¬ν¬μΈνΈ (PLY λ³€ν™ μμ •)
- **μ„±λ¥ μ§€ν‘**: PSNR 25.1, SSIM 0.766, LPIPS 0.194
- **ν•™μµ νΉμ„±**: 15K μ΄ν›„ κµ¬μ΅° μ•μ •ν™”, 50KκΉμ§€ μ„Έλ¶€ μµμ ν™”
- **νΈν™μ„±**: ν‘μ¤€ PLY ν•μ‹, λ‹¤μ–‘ν• λ·°μ–΄ μ§€μ›

---

## π“ **ν•µμ‹¬ μ„±κ³Ό μ”μ•½**

β… **VGGT+Gaussian Splatting μ›ν¬ν”λ΅μ° λ¬Έμ„ ν•™μµ μ™„λ£**  
β… **50K steps Gaussian Splatting ν›λ ¨ μ‹¤ν–‰ (201λ§ Gaussians)**  
β… **2λ‹¨κ³„ ν•™μµ κ³Όμ • μ΄ν•΄: Densification(15K) + Fine-tuning(50K)**  
β… **ν™κ²½ κµ¬μ„± λ¶„μ„ λ° μµμ ν™” κ°€λ¥μ„± κ²€ν†  (λ³€κ²½ μ—†μ)**  
β… **μ‹¤μ©μ μΈ PLY μ¶”μ¶ λ„κµ¬ κ°λ° μ™„λ£**  

**μ¤‘μ”**: 
- VGGSfMμ€ λ¬Έμ„μ—μ„λ§ ν•™μµ, μ‹¤μ  μ‚¬μ©ν•μ§€ μ•μ
- 15K μ΄ν›„ Gaussian κµ¬μ΅° μ•μ •ν™”, 50KκΉμ§€ ν’μ§ ν–¥μƒ μ§€μ†
- ν™κ²½ ν†µν•©μ€ κ²€ν† λ§ μν–‰

*2025/08/29 50K Steps ν›λ ¨ λ° 2λ‹¨κ³„ ν•™μµ κ³Όμ • μ΄ν•΄ μ™„λ£* π―